"$schema": http://json-schema.org/draft-04/schema#
id: taskmanagement_v1.yaml

title: Application Case Management
javaType: "com.vimly.entitystore.schema.TaskCaseEntity"
type: object
"@type": "TaskCase"
extends: 
  "$ref": "entity_v1.yaml"

additionalProperties: false

properties:
  friendlyId:
    type: string
    example: "AUD-03454-123"
    description: "Friendly Id (System Generated, do not include on POST requests)"
    readOnly: true
  title:
    type: string
    description: "Case Title"
  body:
    type: string
    description: "Task Body"
  submittedOn:
    type: string
    format: date-time
    example: "2008-12-01T01:02:03.789Z"
    description: "The date and time that the case went into NOT_STARTED status"

  caseType:
    type: string
    enum:
      - APPLICATION_REVIEW
      - RENEWAL_REVIEW
      - ACTUARY_TASK
      - CUSTOMER_SERVICE
      - SUPPORT

  statuses: 
    type: array
    items: 
      "$ref": "#/definitions/CaseStatus"

  application:
    "$ref": "application_v1.yaml"

  assignment: 
    type: array
    items: 
      "$ref": "#/definitions/CaseAssignment"

definitions:
  CaseStatus:
    javaType: "com.vimly.entitystore.schema.CaseStatus"
    type: object
    additionalProperties: false
    required: 
    - effectiveDateTime
    properties:
      statusId: 
        type: string
        format: uuid
        description: "Status Id (System Generated, do not include on POST requests)"
        readOnly: true
      effectiveDateTime: 
        type: string
        format: date-time
        example: "2008-12-01T01:02:03.789Z"
        #customDateTimePattern: "yyyy-MM-dd'T'HH:mm:ss.SSSZ"
        description: "Effective Date"

      statusCode:
        type: string
        enum:
          - CREATED
          - NOT_STARTED
          - IN_PROGRESS
          - ON_HOLD
          - AWAITING_INFORMATION
          - DONE
          - REJECTED

  CaseAssignment:
    javaType: "com.vimly.entitystore.schema.CaseAssignment"
    type: object
    additionalProperties: false
    required: 
      - effectiveDateTime
    properties:
      assignmentId: 
        type: string
        format: uuid
        description: "Status Id (System Generated, do not include on POST requests)"
        readOnly: true
      effectiveDateTime: 
        type: string
        format: date-time
        example: "2008-12-01T01:02:03.789Z"
        #customDateTimePattern: "yyyy-MM-dd'T'HH:mm:ss.SSSZ"
        description: "Effective Date"
      assignedTo:
        "$ref": "common_v1.yaml#/definitions/TaskUserInfo"


