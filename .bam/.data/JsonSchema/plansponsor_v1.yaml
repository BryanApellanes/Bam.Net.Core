"$schema": http://json-schema.org/draft-04/schema#
id: plansponsor.yaml

title: PlanSponsor Client
javaType: "com.vimly.entitystore.schema.PlanSponsorEntity"
type: object
"@type": "PlanSponsor"
extends: 
  "$ref": "entity_v1.yaml"
properties: 
  sponsorType: 
    type: string
    enum: 
      - PROSPECT
      - CLIENT
      - INACTIVE

  externalIds: 
    type: object
    existingJavaType: "java.util.Map<String, String>" 

  planSponsorStatuses: 
    type: array
    items: 
      "$ref": "#/definitions/PlanSponsorStatus"

  planSponsorship:
      "$ref": "common_v1.yaml#/definitions/PlanSponsorship"

  friendlyId: 
    type: string
    example: "PS-03454-123"
    description: "Friendly Id (System Generated, do not include on POST requests)"
    readOnly: true

  primaryCompany: 
    "$ref": "company_v1.yaml"

  businessName: 
    "$ref": "common_v1.yaml#/definitions/BusinessName"

  additionalCompanies:
      type: array
      minOccurs: 0
      maxOccurs: 50
      items: 
        "$ref": "company_v1.yaml"

  contacts: 
    type: array
    items: 
      "$ref": "contact_v1.yaml"

  renewalDate:
    type: string
    existingJavaType: "java.time.LocalDate"
    pattern: "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    example: "2018-05-14"
    description: "The next renewal date for any plan for this plan sponsor"
  
  tags: 
    type: object
    existingJavaType: "java.util.Map<String, String>" 

definitions:
  PlanSponsorStatus: 
    javaType: "com.vimly.entitystore.schema.PlanSponsorStatusEntity"
    type: object
    required: 
      - effectiveDateTime
    properties: 
      statusId: 
        type: string
        format: uuid
        description: "Status Id (System Generated, do not include on POST requests)"
        readOnly: true
      effectiveDateTime: 
        type: string
        format: date-time
        example: "2018-05-14T22:48:25.020Z"
        description: "Effective Date-Time"
      comments: 
        type: string
        example: "Example comment"
        description: Comment
      statusCode: 
        type: string
        enum: 
          - PROSPECT_INACTIVE
          - PROSPECT_PROSPECT
          - PROSPECT_PENDING_INSTALL
          - CLIENT_ACTIVE
          - CLIENT_RENEWING
          - CLIENT_LOST
          - CLIENT_TERMINATED
